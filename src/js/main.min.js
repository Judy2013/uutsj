    var EventsList = function(element, options) {
      var $main = $('#wrapper');
      var $list = $main.find('#events-list');
      var $pullDown = $main.find('#pull-down');
      var $pullDownLabel = $main.find('#pull-down-label');
      var $pullUp = $main.find('#pull-up');
      var topOffset = -$pullDown.outerHeight();

      this.compiler = Handlebars.compile($('#tpi-list-item').html());
      this.prev = this.next = this.start = options.params.start;
      this.total = null;

      this.getURL = function(params) {
        var queries = ['callback=?'];
        for (var key in  params) {
          if (key !== 'start') {
            queries.push(key + '=' + params[key]);
          }
        }
        queries.push('start=');
        return options.api + '?' + queries.join('&');
      };

      this.renderList = function(start, type) {
        var _this = this;
        var $el = $pullDown;

        if (type === 'load') {
          $el = $pullUp;
        }

        $.getJSON(this.URL + start).then(function(data) {
          console.log(data);
          _this.total = data.total;
          var html = _this.compiler(data.products);
          if (type === 'refresh') {
            $list.children('li').first().before(html);
          } else if (type === 'load') {
            $list.append(html);
          } else {
            $list.html(html);
          }

          // refresh iScroll
          setTimeout(function() {
            _this.iScroll.refresh();
          }, 100);
        }, function() {
          console.log('Error...')
        }).always(function() {
          _this.resetLoading($el);
          if (type !== 'load') {
            _this.iScroll.scrollTo(0, topOffset, 800, IScroll.utils.circular);
          }
        });
      };

      this.setLoading = function($el) {
        $el.addClass('loading');
      };

      this.resetLoading = function($el) {
        $el.removeClass('loading');
      };

      this.init = function() {
        var myScroll = this.iScroll = new IScroll('#wrapper', {
          click: true
        });
        // myScroll.scrollTo(0, topOffset);
        var _this = this;
        var pullFormTop = false;
        var pullStart;

        this.URL = this.getURL(options.params);
        this.renderList(options.params.start);

        myScroll.on('scrollStart', function() {
          if (this.y >= topOffset) {
            pullFormTop = true;
          }

          pullStart = this.y;
          // console.log(this);
        });

        myScroll.on('scrollEnd', function() {
          if (pullFormTop && this.directionY === -1) {
            _this.handlePullDown();
          }
          pullFormTop = false;

          // pull up to load more
          if (pullStart === this.y && (this.directionY === 1)) {
            _this.handlePullUp();
          }
        });
      };

      this.handlePullDown = function() {
        console.log('handle pull down');
        if (this.prev > 0) {
          this.setLoading($pullDown);
          this.prev -= options.params.count;
          this.renderList(this.prev, 'refresh');
        } else {
          console.log('别刷了，没有了');
        }
      };

      this.handlePullUp = function() {
        console.log('handle pull up');
        if (this.next < this.total) {
          this.setLoading($pullUp);
          this.next += options.params.count;
          this.renderList(this.next, 'load');
        } else {
          console.log(this.next);
          // this.iScroll.scrollTo(0, topOffset);
        }
      }
    };

    document.addEventListener('touchmove', function(e) {
      e.preventDefault();
    }, false);

    function renderList(elmt,data){
      var list = $("#"+elmt).empty();
      for (var i = 0; i < data.length; i++) {
        var html = '<li>'
                    +'<div class="item">'
                    +'  <a class="imgCon" href="'+data[i].productUrl+'">'
                    +'    <img src="'+data[i].imgUrl+'" alt="">'
                    +'  </a>'
                    +'  <h4 class="title">'+data[i].name+'</h4>'
                    +'  <div class="editor">'
                    +'    <a class="img-circle"><img src="'+data[i].editorImg+'" alt=""></a>'
                    +'    <span class="editor-name">'+data[i].editor+'</span>'
                    +'  </div>'
                    +'</div>'
                  +'</li>';
        list.append(html);
      };
    }

    function renderResult(elmt,data){
      var list = $("#"+elmt).empty();
      for (var i = 0; i < data.length; i++) {
        var html = '<li>'
                    +'  <a href="'+data[i].resultUrl+'"><img src="'+data[i].imgUrl+'" alt=""></a>'
                    +'  <div class="desc">'
                    +'    <div class="desc-l">'
                    +'      <p class="desc-title"><span class="descTitle">'+data[i].resultName+'</span> <span class="label">新品</span><span class="label">特价</span></p>'
                    +'      <div class="desc-price">价格：<span class="price">'+data[i].price+'<small>元</small></span></div>'
                    +'    </div>'
                    +'    <div class="desc-r">'
                    +'      <span class="iconfont icon-chat"></span>'+data[i].like+'</div>'
                    +'  </div>'
                    +'</li>';
        list.append(html);
      };
    }
    function renderSlider(elmt,indicator,data){
      var sliders = $("#"+elmt).empty();
      var indicator = $("#"+indicator).find('.list-indicator').empty();
      var w = $(window).width();
      for (var i = 0; i < data.length; i++) {
        var html = '<div class="slide">'
          +'  <img src="'+data[i].imgUrl+'" alt="">'
          +'</div>';
        sliders.append(html);
        sliders.children('.slide').width(w);
        var dot = '<li></li>';
        indicator.append(dot);
        if (data.length<=1) {
          indicator.hide();
        };
        sliders.width(sliders.find('.slide').length*w);
      };
    }

    function renderNav(data, callback){
      var list = $("#nav");

      for (var i = 0; i < data.length; i++) {
        var icon = "icon";
        if (data[i].cls == undefined) {
          data[i].cls = "";
          icon = "";
        };
        var html = '<li><a href="'+data[i].lnk+'" class="'+icon + " " +data[i].cls+'">'+data[i].nav+'</a></li>';
        list.append(html);
      };
      list.find('li').first().addClass('active');
      list.delegate('li', 'click', function(event) {
        list.find('li').removeClass('active');
        $(this).addClass('active');
        var _this = $(this);
        if (!!callback) {
          callback(_this.index());
        };
      });
    }